<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Islam | WEEBOKAGE</title>
    <link rel="stylesheet" href="style.css?v=11.4">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <style>
        .islam-body { background: #fdfcf0 !important; color: #1a2f23 !important; background-image: none !important; }
        .islam-card { background: white !important; border: 2px solid #d4af37 !important; color: #1a2f23 !important; padding: 40px !important; box-shadow: 0 10px 30px rgba(0,0,0,0.05) !important; }
        .arabic { font-family: 'Amiri', serif; font-size: 2.2rem; text-align: right; direction: rtl; color: #064e3b; line-height: 1.8; }
        /* FIXED BADGE STYLE */
        .hadith-badge { display: inline-block; background: #064e3b; color: #d4af37; padding: 6px 16px; border-radius: 8px; font-weight: bold; margin-top: 25px; font-size: 0.85rem; border: 1px solid #d4af37; box-shadow: 0 0 10px rgba(6, 78, 59, 0.2); }
    </style>
</head>
<body class="islam-body">
    <nav style="background:#064e3b; border-bottom:4px solid #d4af37;">
        <div class="links">
            <a href="index.html" style="color:white">Home</a>
            <a href="islam.html" style="color:white">Islam</a>
            <a href="downloads.html" style="color:white">Admin</a>
        </div>
    </nav>
    <div class="container">
        <h1 style="text-align:center; color:#064e3b; font-family:'Amiri'; font-size:3rem; margin:40px 0;">بِسْمِ اللهِ الرَّحْمٰنِ الرَّحِيْمِ</h1>
        
        <div class="card islam-card">
            <h2 style="color:#064e3b !important; border-bottom:1px solid #d4af37; padding-bottom:15px; margin-bottom:20px;"><i class="fas fa-book"></i> Sahih al-Bukhari</h2>
            <div id="hadith-box">Loading authentic transmission...</div>
            <button class="btn" onclick="fetchHadith()" style="background:#064e3b; color:white; margin-top:20px;">RANDOMIZE</button>
        </div>

        <div class="card islam-card">
            <h2 style="color:#064e3b !important; border-bottom:1px solid #d4af37; padding-bottom:15px; margin-bottom:20px;"><i class="fas fa-clock"></i> Mawaqit al-Salat</h2>
            <div id="prayer-list">Enable location access to view times...</div>
        </div>
    </div>

    <script>
        const API_KEY = "$2y$10$bh8gWRHGMPAOaerOv4kXpOQLdNdrE1DR7lBNK9oL7OuE20QHSIM6";
        async function fetchHadith() {
            const box = document.getElementById('hadith-box');
            box.innerHTML = "Consulting the archive...";
            try {
                const res = await fetch(`https://hadithapi.com/api/hadiths?apiKey=${API_KEY}&book=sahih-bukhari&paginate=10&page=${Math.floor(Math.random()*200)+1}`);
                const json = await res.json();
                const h = json.hadiths.data[Math.floor(Math.random()*json.hadiths.data.length)];
                let cleanedEn = h.hadithEnglish.replace(/[\u0600-\u06FF]+/g, "").replace(/\s+/g, " ").trim();
                box.innerHTML = `
                    <p class="arabic">${h.hadithArabic}</p>
                    <p style="margin-top:20px; line-height:1.7; font-style:italic;">"${cleanedEn}"</p>
                    <div class="hadith-badge">Bukhari | No. ${h.hadithNumber}</div>
                `;
            } catch (e) { box.innerHTML = "Archive busy. Try again."; }
        }
        function loadPrayers() {
            navigator.geolocation.getCurrentPosition(async (pos) => {
                const res = await fetch(`https://api.aladhan.com/v1/timings?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&method=3`);
                const data = await res.json();
                const t = data.data.timings;
                const p = ["Fajr", "Dhuhr", "Asr", "Maghrib", "Isha"];
                document.getElementById('prayer-list').innerHTML = p.map(n => `
                    <div style="display:flex; justify-content:space-between; padding:12px 0; border-bottom:1px solid #f0f0f0;">
                        <strong>${n}</strong><span style="color:#d4af37; font-weight:bold;">${t[n]}</span>
                    </div>`).join('');
            });
        }
        fetchHadith(); loadPrayers();
    </script>
</body>
</html>
